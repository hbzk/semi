<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.10.4.custom.js"></script>
<script type="text/javascript" src="js/jquery.ui.touch.js"></script>
<script type="text/javascript" src="js/common_no.js"></script>
<script type="text/javascript" src="js/cs_drag.js"></script>
<script type="text/javascript" src="js/timer.js"></script>
<script src="js/jquery.validate.js"></script>



<link rel="stylesheet" href="css/jquery-ui.css">
<link rel="stylesheet" href="css/layout_no.css">

<title>SignUp</title>



<style>
#LoginHeader {
  font-weight: bold;
  background-color: #42BCB2;
  height: 60px;
  color: white;
  text-align: center;
  font-size: 20px;
  line-height: 11px;
}
#LoginHeader1 {
  background-color: #42BCB2;
  height: 25px;
  width: 100%;
}
#LoginMiddle {
  height: 51px;
  font-size: 12px;
  font-weight: bold;
  line-height: 18px;
  text-align: center;
  padding: 13px 0px 16px 0px;
}
#LoginContent {
  border: 1px solid white;
  background-color: #42BCB2;
  height: 700px;
}
#email {
  position: absolute;
  background-color: white;
  border: 0px;
  height: 30px;
  width: 99.9%;
  font-size: 20px;
  padding: 20px 0px 20px 0px;
  text-indent: 20px;
  margin-top: 2px;
  -moz-transition: background-color .6s ease-out, color .15s ease-out;
     -o-transition: background-color .6s ease-out, color .15s ease-out;
     -webkit-transition: background-color .6s ease-out, color .15s ease-out;
     transition: background-color .6s ease-out, color .15s ease-out;
}
#password {
  border: 0px;
  margin-top: 74px;
  width: 99.9%;
  height: 25px;
  font-size: 20px;
  padding: 20px 0px 20px 0px;
  text-indent: 20px;
  background-color: white;
  -moz-transition: background-color .6s ease-out, color .15s ease-out;
     -o-transition: background-color .6s ease-out, color .15s ease-out;
     -webkit-transition: background-color .6s ease-out, color .15s ease-out;
     transition: background-color .6s ease-out, color .15s ease-out;
}
#Enter {
  border: 0px;
  margin-top: 2px;
  background-color: #F05630;
  width: 100%;
  height: 50px;
  font-weight: bold;
  color: white;
  font-size: 20px;
}
#Enter:disabled {
	background: #999;
}

#LogIn {
  border: 0px;
  margin-top: 74px;
  background-color: #F05630;
  width: 100%;
  height: 50px;
  font-weight: bold;
  color: white;
  font-size: 20px;
}
#EmailMessage {
  margin-top: 1px;
  color: #FA5858;
}
#passwordMessage {
  margin-top: 1px;
  color: #FA5858;
}
#fail {
  margin-top: 1px;
  color: #FA5858;
}


</style>



</head>
<body>




<div id="LoginHeader">
<div id="LoginHeader1"></div>
SIGN UP
</div>
<div id="LoginMiddle">
Please input your Email address as your ID.<br>
Your Email identifies you on Sem1colon
<div id="welcome">Welcome to Sem1colon</div>
<div id="EmailMessage">이메일 형식으로 작성해주세요</div>
<div id="emailCheck" style="display:none; color:red;">가입된 이메일</div>
<div id="passwordMessage">비밀번호를 입력해주세요</div>
<div id="fail">아이디와 암호가 일치하지 않습니다</div>
</div>
<div id="LoginContent">

<form id="form" name="form" method="post" action="http://192.168.200.45:3000/signup">
    <input oninput="OnInput (event)" id="email" name="email" type="email" data-clear-btn="true" placeholder="email@" required>
    <input oninput="OnInput1 (event)" id="password" name="password" type="password" placeholder="password" required>
    <button id="Enter" type="submit" disabled="disabled">Enter</button>
    <button id="LogIn">lOG IN</button>
</form>

</div>

<a href="LoginForm_node.html">로그인으로 (테스트)</a>


<script>

  $("#LogIn").click(function(){
    location.href="LoginForm.html";
  });

  $("#EmailMessage").css("display", "none");
  $("#passwordMessage").css("display", "none");
  $("#fail").css("display", "none");

    $('#form').validate ({
          rules: { email: { required: true, email: true },
                password: { required: true },
            },
          messages: { password: { required: "암호를 입력하시오." },
                         email: { required: "이메일 형식으로 입력하시오.",
                                      email: "이메일 형식으로 입력하시오." },
            },
          submitHandler: function (frm) { frm.submit(); },
          
          errorPlacement: function(error, element) {
               //$("#fail").css("display","");
            },
          success: function (success, element) {
                //$(element).css("background", "#A9F5BC");
            },       
        });
  
  
    $("#password").css("display", "");
    $("#Enter").css("display", "none");
  
    function OnInput (event) {
        if(
            (event.target.value).indexOf("@") < (event.target.value).indexOf(".") &&
            (event.target.value).length > ((event.target.value).indexOf(".") + 1) &&
            ((event.target.value).match("com") ||
          (event.target.value).match("net") ||
          (event.target.value).match("kr"))
             ) {
            $("#email").css("backgroundColor", "white");
            $("#password").css("display", "");
            $("#password").focus();
            $("#EmailMessage").css("display", "none");    
            $("#welcome").css("display", "none");
            $("#Enter").css("display", "none");
            $("#LogIn").css("display", "none");
        } else if (
            (event.target.value).match("@") &&
            (event.target.value).length > ((event.target.value).indexOf(".") + 1) &&
            ((event.target.value).indexOf("@") < (event.target.value).indexOf("."))
            ) {
          $("#email").css("backgroundColor", "white");
          $("#password").css("display", "");
          $("#EmailMessage").css("display", "");
          $("#Enter").css("display", "none");
          $("#LogIn").css("display", "none");
        } else {
          $("#email").css("backgroundColor", "#FA5858");
          $("#EmailMessage").css("display", "");
          $("#welcome").css("display", "none");
          $("#password").css("display", "none");
          $("#passwordMessage").css("display", "none");
          $("#LogIn").css("display", "");
        }  
    }
    
    function OnInput1 (event) {
      if(event.target.value.length > 0) {
        $("#password").css("backgroundColor", "white");
        $("#pw").css("display", "none");
        $("#Enter").css({ "display": ""});
        $("#EmailMessage").css("display", "none");  
        $("#passwordMessage").css("display", "none");
      } else {
        $("#password").css("backgroundColor", "#FA5858");
        $("#Enter").css("display", "none");
        $("#pw").css("display", "");
        $("#passwordMessage").css("display", "");
        $("#LogIn").css("display", "none");
      }
    }
   	
    $("#password").click(function(){
      $("#password").val("");
      $("#password").css("backgroundColor", "#FA5858");
        $("#Enter").css("display", "none");
        $("#pw").css("display", "");
        $("#EmailMessage").css("display", "none");  
        $("#passwordMessage").css("display", "");
        $("#EmailMessage").css("display", "none");
        $("#fail").css("display", "none");
    });
    $("#email").click(function(){
      $("#passwordMessage").css("display", "none");
    });
    
    
    
    // 이메일 가입 여부 확인
    $("#password").focusin(function(){
    	$.post("http://192.168.200.45:3000/emailCheck", { email: $('#email').val()})
    		.done(function(data) {
    			if (data == 'err') {
    				$('#emailCheck').css('display', '');
    			} else {
    				$('#emailCheck').css('display', 'none');
    			}
    			
    			// 이메일 한칸이상, 암호 한칸이상, 이메일 중복 아닐때
    			if ($('#email').val() != '' && $('#password').val() != '' && data != 'err') {
		    		$("#Enter").removeAttr('disabled'); // 버튼 활성화
		    	} else {
		    		$("#Enter").attr('disabled', 'disabled'); // 버튼 비활성화
		    	}
    			
    	});
    })
    
    
</script>


</body>
</html>




