<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
<script src="js/fancySelect.js"></script>
<link rel="stylesheet" media="screen, projection" href="css/fancySelect.css">
<title>SIGN UP</title>
<style type="text/css">
@font-face{
		font-family: 'orbitron';
		src: url('./font/orbitron-black-webfont.woff') format('woff');
}
@font-face{
		font-family: 'orbitron-l';
		src: url('./font/orbitron-light-webfont.woff') format('woff');		
}
@font-face{
		font-family: 'nanumGothic;
		src: url('./font/NanumGothic.woff') format('woff');		
}
* { margin: 0; padding: 0;}
:focus { outline: 0;}
body { font-family: 'orbitron',' sans-serif;}

header {font-family: 'orbitron'; height: 100px; line-height: 100px; background: #3ba3d0; 
text-align: center; color: #fff; font-size: 200%; font-weight: bold;}
header>a { position: absolute; left: 0; width: 70px;
text-decoration: none; color: #fff; font-size: 80%;}

input {font-family: 'nanumGothic'; border: 0px; display: block; width: 100%; height: 30px; padding-top: 20px;
text-indent: 30px; font-size: 100%; }
#email { border-top: 1px solid #999;}
#password { border-top: 1px solid #999;}
#btnStart {font-family: 'orbitron'; width: 100%; height: 55px; background: #F05630; 
-webkit-transition: background-color .4s ease-out;
color: #fff; font-size: 200%; font-weight: bolder;}
#btnStart:disabled { background: #999; }

#emailValidate, #emailCheck { position: absolute; top: 110px; 
text-indent: 30px; color: #df4949;}

footer { text-align: center; margin-top: 5px; margin-bottom:5px; bottom: 0px; }
#terms { margin-right: 50px;}

/* 성별선택관련 */
#form img{max-width: 80%; width:auto; height: auto; padding: 10px 10% 10px 10%;}
.input_hidden {
    position: absolute;
    left: -9999px;
}
.sexSelect.selected {
    background-color: #999;
}

.sexSelect, .job, .age{
	float: left; z-index: 99999;
}

#form .sexSelect {
    display: inline-block;
    width: 49.9999%;
}
.fancy-select{float: left; width: 48%;margin: 1px 3px 10px 0px; padding: 0px;text-indent: 10px;}
.trigger{width:100%; }
.options{ width: 100%;}
.bottomEle{position: fixed; bottom: 0px;width: 100%;}
</style>
</head>
<body>

<header><a href="welcome.html">&lt;</a>SIGN UP</header>

<form id="form" method="post" action="http://192.168.200.6:1111/signup">
		 <input type="radio" name="sex" id="female"/>
        <label class="sexSelect" for="female"><img src="./css/img/female.png" alt="I'm a woman" /></label>

    <input type="radio" name="sex" id="male" />
        <label class="sexSelect" for="male"><img src="./css/img/male.png" alt="I'm a man" /></label>
    
    
    <select class="ageSelect">
	  <option value="">AGE</option>
	  <option>Teenagers</option>
	  <option>Early 20's</option>
	  <option>Middle 20's</option>
	  <option>Late 20's</option>
	  <option>Early 30's</option>
	  <option>Middle 30's</option>
	  <option>Late 30's</option>
	  <option>Early 40's</option>
	  <option>Middle 40's</option>
	  <option>Late 40's</option>
	  <option>Early 50's</option>
	  <option>Middle 50's</option>
	  <option>Late 50's</option>
		</select>
	   <select class="jobSelect">
	  <option value="">JOB</option>
	  <option>STUDENT</option>
	  <option>OFFICE WORKER</option>
	  <option>FREE-LANCE</option>
	  <option>BUSINESS MAN</option>
		</select>
	
<div class="bottomEle">    
    <input id="email" name="email" type="email" placeholder="EMAIL" autofocus required oninput="oninputEmail(event)">
    <p id="emailValidate"></p>
    <p id="emailCheck"></p>
    <input id="password" name="password" type="password" placeholder="PASSWORD" required oninput="oninputPwd (event)">
    <button id="btnStart" type="submit" disabled="disabled">START</button>
<footer>
	<a id="terms" href="termOfUse.html">Terms of Use</a>
	<a href="privacyPolicy.html">Privacy Policy</a>
</footer>
</div>
</form>


<script type="text/javascript">
var emailVal;
$('#form input:radio').addClass('input_hidden');
$('#form .sexSelect').click(function(){
    $(this).addClass('selected').siblings().removeClass('selected');
});

$('.jobSelect').fancySelect();
	$('.ageSelect').fancySelect();
function oninputEmail() {
	emailVal = $('#email').val();
	
	if (validateEmail()) {
		$('#emailValidate').text('');
	} else {
		$('#emailValidate').text('이메일 형식으로 입력해주세요');
	}
	
	validateForm();
}

function oninputPwd() {
	validateForm();
}

// 메일 형식 검증
function validateEmail() {
	if (emailVal.length > 4 && emailVal.match("@") &&
		emailVal.indexOf("@") + 1 < emailVal.indexOf(".", emailVal.indexOf("@")) &&
		emailVal.length - 1 > emailVal.indexOf(".", emailVal.indexOf("@"))) {
			return true;
	} else {
		return false;
	}
}


//이메일 가입 여부 확인
function validateForm() {
	$.post("http://192.168.200.6:1111/emailCheck", { email: $('#email').val()})
		.done(function(data) {
			if (data == 'already') {
				$('#emailCheck').text('이미 가입된 이메일입니다.');
				$('#btnStart').attr('disabled', 'disabled');
				
			} else { // 가입된 이메일이 아닐때
				$('#emailCheck').text('');
				
				// 추가 조건 확인 후 버튼 활성화
				if (validateEmail() && $('#password').val().length > 0) {
					$('#btnStart').removeAttr('disabled');
				} else {
					$('#btnStart').attr('disabled', 'disabled');
				}
			}
	});
}


</script>
</body>
</html>